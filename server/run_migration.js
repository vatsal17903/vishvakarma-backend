
import { db } from './database/init.js';

const terms = `THE SERVICES
1 The quality, quantity and description of the Services are as stated in the Scope of Services.
2 The Designer shall perform and complete the Services in accordance with the Design Contract.
3 If the Designer performed any services for the Client prior to the operative date of the Design Contract, those services shall be incorporated in the Services and are governed by the terms of the Design Contract.

PAYMENT FOR THE SERVICES
1 The Client shall pay the Designer the Fee in consideration of the performance of the Services in accordance with the Design Contract.
2 The Designer shall be entitled to payment for the disbursements set out in the Schedule 1 at cost and such other disbursements as are approved by the Client.
3 The Designer shall claim payment of the Fee and/or disbursements by rendering invoices to the Client. Each invoice shall be given in writing and shall:
(A) set out the amount of the Fee claimed;
(B) separately identify each disbursement claimed; and
(C) separately identify any other claim for payment under the Design Contract.
4 The Client shall pay the full amount of all invoices within seven (7) Business Days of receipt.
5 If any payment by the Client to the Designer is overdue, then the Client must pay interest at a rate of 3.5% per month (or part thereof), until the overdue amount is paid in full. Interest is payable on demand. Any payments made by the Client will first be applied to any outstanding interest.
6 The Client indemnifies the Designer for breaches of clause 2d above.

TIME FOR PERFORMANCE OF SERVICES
1 The Designer will use commercially reasonable endeavours to perform the Services within the time(s) specified in the Interior Design Agreement (if any).
2 If no time(s) for performance are specified in the Interior Design Agreement, the Designer will perform the Services within a reasonable time.

RISK AND TITLE
1 Risk of damage to any Goods under the Design Contract passes to the Client upon order of those Goods.
2 If any Goods are withheld by the Designer pursuant to clause 2g above, risk in the Goods passes to the Client when the Client would have been able to take delivery of the Goods had the Designer not withheld the Goods.
3 Title to the Services passes to the Client upon payment for those Services.

CLIENT RESPONSIBILITIES AND ACKNOWLEDGEMENT
1 Without limiting the provisions of the Scope of Services, the Client’s responsibilities and obligations under the Design Contract include.
(A) Providing materials and written approvals and/or instructions in accordance with the Design Contract.
(B) Coordination of any decision making with parties other than the Designer.
(C) Providing information from third parties required for the Designer to perform the Services.
2 Any delays in the Client’s performance of its obligations, or variations to the Services caused by the Client, may delay performance of the Services and that any such delay caused by the Client shall not constitute a breach of any of the Designer’s obligations under the Design Contract.

REVIEW AND APPROVAL OF DOCUMENTS BY THE CLIENT
1 The Client must, promptly (and in any event, within any time identified in the Design Contract for such review), review any Document(s) provided by the Designer
2 If the Client fails to respond to the Designer within the latter of 15 days of receipt of the Document(s) and any time specified in the Design Contract for its review, then the Document(s) are deemed to be approved and accepted by the Client.
3 Notwithstanding that a Document complies with the requirements of the Design Contact, the Designer may agree with the Client to amend the Document in which case clause 9 will apply.

INTELLECTUAL PROPERTY RIGHTS
1 The Client acknowledges that the Designer remains the owner of all Designer’s Background IP.
2 The Client acknowledges and agrees that all Developed IP is vested in the Designer and is the Designer’s property as and when created, and the Client hereby assigns all rights, title and interest in and to the Developed IP to the Designer.
3 The Client warrants that, unless otherwise provided in the Design Contract, the Client’s requirements, design, materials, documents and methods of working, each specified in the Design Contract or provided or directed by the Client, shall not infringe any Intellectual Property Right.

CONFIDENTIALITY
1 Each party shall keep all Confidential Information confidential, and shall not without the prior written consent of the other party.
2 Use or allow its personnel to use any confidential information for any purpose other than in relation to the provision of obligations under the Design Contract.

VARIATIONS
1 The Client may vary the Services to be performed by the Designer by giving written notice to the Designer.
2 The Designer will vary the Services as instructed by the Client to the extent it is reasonable and possible to do so.

LIABILITY AND CONSEQUENTIAL LOSS
1 To the extent permitted by law, the liability of the Designer to the Client arising out of or in connection with the Design Contract is, to the extent permitted by law, limited in the aggregate to the amount of the Fee payable under the Design Contract.
2 Notwithstanding any other provision of the Design Contract, the Designer will not be liable to the Client for any loss of revenue, loss of profit or anticipated profit, loss of production, loss of use of any plant or facility.

DEFAULT AND TERMINATION
1 The Design Contract shall commence upon receipt by the Designer of a copy of the Design Contract signed by the Client and shall remain on foot until the completion of the Services or earlier termination of the Design Contract.
2 Either party may immediately terminate the Design Contract by written notice to the other if a party
3 The cost of any Goods ordered prior to termination which cannot be cancelled.

INDEPENDENT CONTRACTOR AND SUBCONTRACTING
1 The parties acknowledge and agree that the Designer is an independent contractor, not an employee of the Client or any company affiliated with the Client and their contract with a builder.
2 The Design Contract does not create a partnership or joint venture and neither party is authorized to act as an agent or bind the other party except as expressly stated in the Design Contract.

GOODS
1 To the maximum extent permitted by law, the Designer gives no warranties whatsoever in relation to any Goods.
2 The parties acknowledge and agree that the Designer may by agreement purchase Goods on behalf of the Client for the purposes of the Services. In the event the Designer does son agent or bind the other party except as expressly stated in the Design Contract.

GENERAL
1 Amendment – no amendment or variation of the Design Contract is valid or binding on the Designer, unless made in writing and signed by the Client and the Designer.
2 Notices – All notices to be given hereunder shall be transmitted in writing either by registered mail or electronic mail with return confirmation of receipt and shall be sent to the addresses identified in the Design Agreement, unless notification of change of address is given in writing.
3 No Assignment – Neither party may assign, wither in writing or orally, or encumber its rights or obligations under the Design Contract or permit the same to be transferred, assigned or encumbered by operation of law or otherwise, without the prior written consent of the other party.

DEFINITIONS
In these Terms and Conditions:
Business Days means a day except Sundays and public holidays in the State of New South Wales and days between Christmas Day and New Year’s Day.
Client means the party named as such in the Agreement.
Client’s Background IP means the Client’s Intellectual Property Rights that are in existence at the date of the Design Contract or come into existence after the date of the Design Contract, otherwise than in connection with the Design Contract.
Designer means the party named as such in the Interior Design Agreement.
Developed IP means all Intellectual Property Rights (present or future) created, discovered or coming into existence in connection with the Design Contract including all Intellectual Property Rights developed by the Designer in performing the Services but excluding any modifications, improvements or alterations to the Designer’s Background IP developed by the Designer in performing the Services
Documents means any design documents to be supplied by the Designer as part of the Services.
Goods means any goods specified in the Documents or the Agreement, including those to be supplied as part of the Services, but excludes the Documents
Intellectual Property Rights means all industrial and intellectual property rights whether protectable by statute, at common law or in equity, including all copyright and other similar rights that may subsist or may hereafter subsist in works or any subject matter, rights in relation to inventions

APPROVED DISBURSEMENTS
- Incidental and out of pocket expenses including but not limited to costs for telephone calls, postage, shipping, couriers, parking fees, transport, accommodation
- Cancellation of meetings without 48 hours notice prior to the meeting commencement
- Cancellation of 3 meetings
- Cost of product samples`;

const payment = `PAYMENTS:
1 All consults are invoiced and payable in full 6 business days before appointment.
2 Cancellations made Six or more business days in advance are subject to a standard fee.
3 Fees on credit card payments: a small fee applies to payments made with credit cards.
4 Concept design work is payable on invoice before commencement of works.
5 Renovation, project management and procurement projects are invoiced as follows:
(A) 50% engagement invoice (of agreed budget) required 2 weeks prior to work commencing
(B) Ongoing invoices are staggered throughout the project with the final invoice payable within 7 days of completion of major works on project.
(C) Fabrics, antiques and custom furniture orders require 100% payment prior to purchase.
(D) Should you choose to return any item once it’s been ordered, it is strictly at the suppler’s discretion and subject to their restocking fee (often 20-50% plus return freight)
(E) Note that no exchange, no credit and no refund on custom made, bespoke, imported or specialty orders. No exceptions.
(F) Warranty claims and service calls after the project completion are to be dealt with by the client. MDS can provide copies of proof of purchase for warranties. If the client would like MDS to manage warranty claims or service calls at the admin hourly rate this will be invoiced separately.
(G) If you wish to use a credit card to make payments, MDS uses a 3rd party facility. The 3rd party charges a fee for this service. The service fee is 1.9% on MC, Visa, Amex and higher fees charged on cards not noted. You will not see the fee has been charged until it has processed your payment. Please consider the fee before you continue through the payment portal. To avoid the fee, please pay via Bank Deposit.`;

async function run() {
    try {
        console.log('Migrating database...');
        try {
            await db.query('ALTER TABLE companies ADD COLUMN default_terms_conditions TEXT');
            console.log('Added default_terms_conditions column');
        } catch (e) {
            console.log('default_terms_conditions column might already exist:', e.message);
        }

        try {
            await db.query('ALTER TABLE companies ADD COLUMN default_payment_plan TEXT');
            console.log('Added default_payment_plan column');
        } catch (e) {
            console.log('default_payment_plan column might already exist:', e.message);
        }

        await db.execute('UPDATE companies SET default_terms_conditions = ?, default_payment_plan = ? WHERE code = ?',
            [terms, payment, 'INTERIOR']
        );
        console.log('Updated Interior company terms and payment plan');

        console.log('Done!');
        process.exit(0);
    } catch (err) {
        console.error('Migration failed:', err);
        process.exit(1);
    }
}

run();
